<template name="dataRoom">
  <div class="list-view flex-tab__header">
      <div class="title">
        <h2>{{_ "Data Room"}}</h2>
      </div>
      {{#if hasPermission 'AddFolder'}}<button class="button add-dir"><span>Add Folder</span></button>{{/if}}
      {{#if hasPermission 'AddDoc'}}<button class="button add-file"><span>Add File</span></button>{{/if}}
    </div>
    <div class="uploaded-files-list list-view flex-tab__result js-list">
      <ul class="list clearfix lines">
        {{#each getDirs}}
          <li id="{{_id}}" class="room-file-dir">
            <i class="icon-folder-open"></i>
            <p id="{{_id}}" class="dir-name">{{name}} 
              {{#if hasPermission 'ChangePermission'}}
                <i id="{{_id}}" class="icon-cog dir-permission"></i>
              {{/if}}
              {{#if hasPermission 'RemoveFolder'}}
              <i id="{{_id}}" class="icon-trash folder-delete"></i>
              {{/if}}
            </p>
            {{> dirs dataRoom=dataRoom permissions=permissions dir=this}}
          </li>
        {{/each}}
        {{#each files}}
          {{> hubFile}}
        {{/each}}
      </ul>
    </div>
    {{> fileUpload}}
    {{> dataRoomPermissions}}
</template>

<template name="dirs">
  {{#each getDirs}}
    <li id="{{_id}}" class="room-file-dir">
      <i class="icon-folder-open"></i>
      <p id="{{_id}}" class="dir-name">{{name}} 
        {{#if hasPermission 'ChangePermission'}}
          <i id="{{_id}}" class="icon-cog dir-permission"></i>
        {{/if}}
        {{#if hasPermission 'RemoveFolder'}}
        <i id="{{_id}}" class="icon-trash folder-delete"></i>
        {{/if}}
      </p>
    {{> dirs dataRoom=dataRoom permissions=permissions dir=this}}
    </li>
  {{/each}}
  {{#each files}}
    {{> hubFile permissions=permissions file=this}}
  {{/each}}
</template>
